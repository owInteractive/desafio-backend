# OW-INTERACTIVE API

## Clone
* Execute the following command to get the latest version of the project
```
$ git clone --recursive git@github.com:demartinezraul/desafio-backend.git ow-interactive
```

## Setting up a development environment

* create a file named .env (copy .env.example file) which should contain the following default setup ( you should provide your own values to this variables ):
```
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=ow-interactive
DB_USERNAME=root
DB_PASSWORD=root
```

## Running the app on DOCKER

* create a file named docker-compose.yml (copy docker-compose.yml.example file) which should contain the following default setup ( you should provide your own values to this variables ):
* Exec `docker-compose up -d` to create containers.
* Exec `docker-compose exec php-fpm bash` enter the container project
```
# inside the application container.

$ composer install
$ php artisan key:generate
$ php artisan storage:link
$ php artisan migrate:fresh --seed
$ php artisan passport:install
$ php artisan l5-swagger:generate

```

## Set permissions
Execute the following commands to set the write permission on the cache folder:
```
$ cd ow-interactive
$ sudo chmod -R 777 storage/
```
## Access the application on SWAGGER

```
http://localhost:3000/api/documentation
```

## Login SWAGGER
Click the "Authorize" button on the page of the link above.
 
```
username: admin@admin.com
password: admin
Client credentials location: Authorization Header
cliente_id: 2
client_secret: Token generated by the passport is found in the oauth_secrets table secret column of ID 2
```
After that, you will be authenticated in the system and will be able to access all routes.

## Access JSON SWAGGER

```
http://localhost:3000/docs/api-docs.json
```

## API's

* Users register - Route: /api/users/register [POST],
* Users list - Route: /api/users [GET],
* Users show - Route: /api/users/{id} [GET],
* Users update - Route: /api/users/{id} [PATCH],
* Users current balance - Route: /api/users/{id}/current-balance [GET],
* Users delete - Route: /api/users/destroy/{id} [DELETE],
---
* Transactions list - Route: /api/transactions [GET],
* Transactions create - Route: /api/transactions/store [POST],
* Transactions delete - Route: /api/transactions/destroy/{id} [DELETE],
* Transactions export - Route: /api/transactions/export [POST],

## Run automated tests (PHPUnit)
* Run the command below on the terminal to process the tests.
``` 
composer test
or
vendor/bin/phpunit
```
